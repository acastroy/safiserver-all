<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- WARNING: Eclipse auto-generated file.
              Any modifications will be overwritten.
              To include a user specific buildfile here, simply create one in the same
              directory with the processing instruction <?eclipse.ant.import?>
              as the first entry and export the buildfile again. -->
<project basedir="." default="build" name="AsteriskSafletDesigner.diagram">
	<property environment="env" />
	<property name="ECLIPSE_HOME" value="../../ganymede/eclipse" />
	<property name="debuglevel" value="source,lines,vars" />
	<property name="target" value="1.6" />
	<property name="source" value="1.6" />
	<path id="Plug-in Dependencies.libraryclasspath">
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.ide_3.4.1.M20080903-2000.jar" />
		<pathelement location="../../SafiCommons" />
		<pathelement location="../../SafiCommons/commons-beanutils.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.runtime_3.4.0.v20080512.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.osgi_3.4.2.R34x_v20080826-1230.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.equinox.common_3.4.0.v20080421-2006.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.jobs_3.4.0.v20080512.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20080610/runtime_registry_compatibility.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.equinox.registry_3.4.0.v20080516-0950.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.equinox.preferences_3.2.201.R34x_v20080709.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.contenttype_3.3.0.v20080604-1400.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.equinox.app_1.1.0.v20080421-2006.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.jface_3.4.1.M20080827-2000.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.swt_3.4.1.v3449c.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.swt.win32.win32.x86_3.4.1.v3449c.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.commands_3.4.0.I20080509-2000.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.views_3.3.0.I20080509-2000.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.ecore_2.4.1.v200808251517.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.common_2.4.0.v200808251517.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.ecore.xmi_2.4.1.v200808251517.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.edit.ui_2.4.1.v200808251517.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.workbench_3.4.1.M20080827-0800a.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.edit_2.4.1.v200808251517.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.ecore.change_2.4.0.v200808251517.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.common.ui_2.4.0.v200808251517.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui_3.4.1.M20080910-0800.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.emf.core_1.1.1.v20080716-1600.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.common.core_1.1.0.v20080425-1959.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.resources_3.4.1.R34x_v20080902.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.workspace_1.2.2.v200809171833.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.transaction_1.2.1.v200807161719.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.validation_1.2.0.v200807161729.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.emf.clipboard.core_1.1.0.v20080425-1959.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.emf.commands.core_1.1.1.v20080716-1600.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.emf.ui.properties_1.1.0.v20080425-1959.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.common.ui.services.properties_1.1.0.v20080425-1959.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.common.ui_1.1.0.v20080512-1200.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.console_3.3.0.v20080529-1300.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.jface.text_3.4.1.r341_v20080827-1100.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.text_3.4.0.v20080605-1800.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.workbench.texteditor_3.4.1.r341_v20080827-1100.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.team.core_3.4.1.r34x_20080827.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.diagram.ui_1.1.2.v20080916-2008.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gef_3.4.1.v20080716.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.draw2d_3.4.0.v20080529.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.emf.ui_1.1.0.v20080516-1748.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.common.ui.action_1.1.0.v20080425-1959.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.common.ui.services.action_1.1.0.v20080507-2230.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.common.ui.services_1.1.1.v20080718-1700.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.emf.type.core_1.1.1.v20080807-1325.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.gef.ui_1.1.1.v20080813-1510.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.draw2d.ui_1.1.2.v20080911-1506.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.views.properties.tabbed_3.4.1.M20080730-0800.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.forms_3.3.101.v20080708_34x.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.notation_1.1.1.v20080716-1600.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.diagram.core_1.1.2.v20080903-1510.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.diagram.ui.properties_1.1.1.v20080813-1510.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.diagram.ui.providers_1.1.2.v20080916-2008.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.diagram.ui.render_1.1.2.v20080903-1510.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.diagram.ui.resources.editor_1.1.1.v20080716-1600.jar" />
		<pathelement location="../../Saflets" />
		<pathelement location="../../Saflets.edit" />
		<pathelement location="../../AsteriskCore" />
		<pathelement location="../../AsteriskCore.edit" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ocl.ecore_1.2.1.v200807301850.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ocl_1.2.2.v200809101949.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/net.sourceforge.lpg.lpgjavaruntime_1.1.0.v200803061910.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.draw2d.ui.render_1.1.0.v20080507-2230.jar" />
		<pathelement location="../../com.safi.asterisk.figures" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.editors_3.4.0.v20080603-2000.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.filebuffers_3.4.0.v20080603-2000.jar" />
		<pathelement location="../../AsteriskSafiServerPlugin" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.navigator_3.3.101.M20080827-0800.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.navigator.resources_3.3.101.M20080910-0800.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.expressions_3.4.0.v20080603-2000.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.diagram.ui.printing_1.1.2.v20080911-1506.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.gmf.runtime.diagram.ui.printing.render_1.1.2.v20080916-2008.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.update.core_3.2.201.R34x_v20080714.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.update.scheduler_3.2.100.v20080404.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.update.ui_3.2.100.v20080318.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.filesystem_1.2.0.v20080604-1400.jar" />
		<pathelement location="../../SafiDB" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.teneo.hibernate_1.0.1.v200809211527" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.teneo.hibernate_1.0.1.v200809211527/org.eclipse.emf.teneo.hibernate.extra.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.teneo.hibernate_1.0.1.v200809211527/org.eclipse.emf.teneo.hibernate.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.teneo_1.0.1.v200809211527.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.teneo.annotations_1.0.1.v200809211527.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.emf.teneo.hibernate.mapper_1.0.1.v200809211527.jar" />
		<pathelement location="../../SafiDB.edit" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.intro_3.2.201.v20080702_34x.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.help_3.3.101.v20080702_34x.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.ui.cheatsheets_3.3.101.v20080702_34x.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.apache.commons.lang_2.3.0.v200803061910.jar" />
		<pathelement location="../../Hibernate30" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.apache.commons.logging_1.0.4.v20080605-1930.jar" />
		<pathelement location="../../org.jdom" />
		<pathelement location="../../org.eclipse.dltk.console" />
		<pathelement location="../../org.eclipse.dltk.console.ui" />
		<pathelement location="../../org.eclipse.dltk.core" />
		<pathelement location="../../org.eclipse.dltk.debug" />
		<pathelement location="../../org.eclipse.dltk.debug.ui" />
		<pathelement location="../../org.eclipse.dltk.formatter" />
		<pathelement location="../../org.eclipse.dltk.javascript.core" />
		<pathelement location="../../org.eclipse.dltk.javascript.core.dom.support" />
		<pathelement location="../../org.eclipse.dltk.javascript.core.dom.support.sample" />
		<pathelement location="../../org.eclipse.dltk.javascript.debug" />
		<pathelement location="../../org.eclipse.dltk.javascript.debug.ui" />
		<pathelement location="../../org.eclipse.dltk.javascript.jdt.integration" />
		<pathelement location="../../org.eclipse.dltk.javascript.jsjdtdebugger" />
		<pathelement location="../../org.eclipse.dltk.javascript.launching" />
		<pathelement location="../../org.eclipse.dltk.javascript.rhino" />
		<pathelement location="../../org.eclipse.dltk.javascript.rhino.dbgp" />
		<pathelement location="../../org.eclipse.dltk.javascript.ui" />
		<pathelement location="../../org.eclipse.dltk.launching" />
		<pathelement location="../../org.eclipse.dltk.ui" />
		<pathelement location="../../org.eclipse.dltk.validators.core" />
		<pathelement location="../../org.eclipse.dltk.validators.externalchecker" />
		<pathelement location="../../org.eclipse.dltk.validators.ui" />
		<pathelement location="../../org.eclipse.emf.databinding" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.databinding_1.1.1.M20080827-0800b.jar" />
		<pathelement location="../../org.eclipse.emf.databinding.edit" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.databinding.beans_1.1.1.M20080827-0800a.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.databinding.beans.source_1.1.1.M20080827-0800a.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.core.databinding.source_1.1.1.M20080827-0800b.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.jface.databinding_1.2.1.M20080827-0800a.jar" />
		<pathelement location="${ECLIPSE_HOME}/plugins/org.eclipse.jface.databinding.source_1.2.1.M20080827-0800a.jar" />
	</path>
	<path id="AsteriskSafletDesigner.diagram.classpath">
		<path refid="Plug-in Dependencies.libraryclasspath" />
		<pathelement location="bin" />
		<pathelement location="lib/safiRouting.jar" />
		<pathelement location="lib/nanoxml.jar" />
		<pathelement location="lib/rowset.jar" />
		<pathelement location="lib/squirrel.jar" />
		<pathelement location="lib/dom4j-1.6.1.jar" />
		<pathelement location="lib/jmf.jar" />
		<pathelement location="lib/com.richclientgui.toolbox.0.4.jar" />
		<pathelement location="lib/javalayer.jar" />
		<pathelement location="lib/tritonus_gsm-0.3.6.jar" />
		<pathelement location="lib/tritonus_mp3-0.3.6.jar" />
		<pathelement location="lib/tritonus_remaining-0.3.6.jar" />
		<pathelement location="lib/tritonus_share-0.3.6.jar" />
		<pathelement location="lib/nebula_compositetable.jar" />
		<pathelement location="lib/nebula_cdatetime_0.9.0.jar" />
		<pathelement location="lib/tritonus_dsp-0.3.6.jar" />
		<pathelement location="lib/args4j-2.0.1.jar" />
		<pathelement location="lib/customInitiator.jar" />
		<pathelement location="lib/customInitiatorInvoker.jar" />
		<pathelement location="../../SafiServerCore/lib/bcprov-jdk16-141.jar" />
	</path>
	<target name="init">
		<mkdir dir="bin" />
		<copy includeemptydirs="false" todir="bin">
			<fileset dir="src" excludes="**/*.launch, **/*.java" />
		</copy>
	</target>
	<target name="clean">
		<delete dir="bin" />
	</target>
	<target depends="clean" name="cleanall" />
	<target depends="build-subprojects,build-project" name="build" />
	<target name="build-subprojects" />
	<target depends="init" name="build-project">
		<echo message="${ant.project.name}: ${ant.file}" />
		<javac debug="true" debuglevel="${debuglevel}" destdir="bin" source="${source}" target="${target}">
			<src path="src" />
			<classpath refid="AsteriskSafletDesigner.diagram.classpath" />
		</javac>
	</target>
	<target description="Build all projects which reference this project. Useful to propagate changes." name="build-refprojects" />
	<target description="copy Eclipse compiler jars to ant lib directory" name="init-eclipse-compiler">
		<copy todir="${ant.library.dir}">
			<fileset dir="${ECLIPSE_HOME}/plugins" includes="org.eclipse.jdt.core_*.jar" />
		</copy>
		<unzip dest="${ant.library.dir}">
			<patternset includes="jdtCompilerAdapter.jar" />
			<fileset dir="${ECLIPSE_HOME}/plugins" includes="org.eclipse.jdt.core_*.jar" />
		</unzip>
	</target>
	<target description="compile project with Eclipse compiler" name="build-eclipse-compiler">
		<property name="build.compiler" value="org.eclipse.jdt.core.JDTCompilerAdapter" />
		<antcall target="build" />
	</target>

	<target name="full_build">
		<ant antfile="../RectilinearRouting/big_build.xml" target="build" />
		<ant antfile="../Handlers/big_build.xml" target="build" />
	</target>

	<target name="obfuscate" depends="build">
		<taskdef resource="proguard/ant/task.properties" classpath="proguard/proguard.jar" />

		<echo message="Obfuscating RectilinearRouting" />
		<proguard configuration="../RectilinearRouting/Routing.pro" />

		<echo message="Obfuscating SafiServerCore" />
		<proguard configuration="../SafiServerCore/safiServer.pro" />

		<echo message="Copying SafiServerCore to safiServer_v20090712.jar" />
		<proguard configuration="../SafiServerCore/safiServerExport.pro" />
		<copy tofile="../AsteriskSafiServerPlugin/lib/safiServer.jar" overwrite="true">
			<fileset file="../AsteriskSafiServerPlugin/safiServer.jar" />
		</copy>
		<delete file="../AsteriskSafiServerPlugin/safiServer.jar" />
		<!--
		<copy tofile="../AsteriskSafiServerPlugin/lib/safiServer.jar" overwrite="true">
			<fileset  file="../SafiServerCore/obfuscated/safiServer_v20090712.jar">
			</fileset>
		</copy>
		-->
		<!-- <move file="../SafiServerPlugin/lib/safiServer_v20090219.jar" tofile="../SafiServerPlugin/lib/safiServer.jar" overwrite="true" /> -->
		<ant dir="../SafiDB" antfile="../SafiDB/build_enhanced.xml" target="instrument" />

		<delete includeEmptyDirs="true">
			<fileset dir="D:\temp\safiStaging\non_obfuscated" includes="**/*" />
		</delete>

	</target>

	<target name="obfuscate2" depends="build">
		<taskdef resource="proguard/ant/task.properties" classpath="proguard/proguard.jar" />

		<echo message="Cleaning old obfuscated build" />
		<delete includeEmptyDirs="true">
			<fileset dir="D:\temp\safiStaging\obfuscated" includes="**/*" />
		</delete>

		<echo message="Copying to obfuscated build dir" />
		<copy todir="D:\temp\safiStaging\obfuscated\eclipse" overwrite="true">
			<fileset dir="D:\temp\safiStaging\non_obfuscated\eclipse">
				<include name="**/*" />
				<exclude name="**/AsteriskSafletDesigner.diagram*.jar/**" />
			</fileset>
		</copy>

		<!-- <proguard configuration="../SafJSEditor-1.0/jseditor.pro" /> -->

		<echo message="Obfuscating Saflets" />
		<proguard configuration="../Saflets/Saflets.pro" />
		<echo message="Obfuscating SafiServer" />
		<proguard configuration="../AsteriskSafiServerPlugin/safiserver.pro" />
		<echo message="Obfuscating AsteriskSafletDesigner.diagram" />
		<proguard configuration="Diagram.pro" />
		<echo message="Obfuscating CoreActionPak1" />
		<proguard configuration="../CoreActionPak1/actionpak1.pro" />
		<echo message="Obfuscating TimeBasedRoutingNew ActionPak" />
		<proguard configuration="../TimeBasedRoutingPakNew/timebasedrouting.pro" />


		<echo message="Cleaning staging dir" />
		<delete verbose="true" quiet="true" includeemptydirs="true">
			<fileset file="D:\safi_install\SafiWorkshop\SafiWorkshop.*" />
			<fileset file="D:\safi_install\SafiWorkshop\.eclipseproduct" />
			<fileset dir="D:\safi_install\SafiWorkshop\plugins" />
			<fileset dir="D:\safi_install\SafiWorkshop\features" />
			<fileset dir="D:\safi_install\SafiWorkshop\configuration" />
		</delete>

		<echo message="copying to staging dir" />
		<copy todir="D:\safi_install\SafiWorkshop" overwrite="true">
			<fileset dir="D:\temp\safiStaging\obfuscated\eclipse">
				<include name="**/*" />
			</fileset>
		</copy>
		<!--
		 <taskdef name="nsis" classname="net.sf.nsisant.Task">
		        <classpath location="proguard/nsisant-1.2.jar"/>
		  </taskdef>
		<nsis script="../SAFIInstaller/build_workshop.nsi"/>
-->
	</target>

	<target name="obfuscateServer" depends="build">
		<echo message="Obfuscating server..." />
		<taskdef resource="proguard/ant/task.properties" classpath="proguard/proguard.jar" />

		<echo message="Doin up handlersLib.pro" />
		<proguard configuration="../Saflets/SafletsLib.pro" />
		<copy todir="../SafiServerCore/lib" overwrite="true">
			<fileset file="../Saflets/obfuscated/safletcore*.jar">
			</fileset>
		</copy>

		<echo message="Rebuilding SafiDB" />
		<ant dir="../SafiDB" antfile="../SafiDB/build_enhanced.xml" target="cleanall" />
		<ant dir="../SafiDB" antfile="../SafiDB/build_enhanced.xml" target="build" />
		<echo message="Obfuscating SafiDB" />
		<proguard configuration="../SafiDB/SafiDBRuntime.pro" />

		<echo message="Obfuscating SafiServer.." />
		<proguard configuration="../SafiServerCore/safiServer.pro" />

		<copy todir="../SafiServerCore/lib" overwrite="true">
			<fileset file="../SafiServerCore/obfuscated/safiServer*.jar">
			</fileset>
		</copy>

		<echo message="deleting DB if it exists" />
		<delete includeEmptyDirs="true" failonerror="false">
			<fileset dir="../SafiServerCore/db" includes="**/*" />
		</delete>
		<!--
		<taskdef name="nsis" classname="net.sf.nsisant.Task">
		            <classpath location="proguard/nsisant-1.2.jar"/>
		      </taskdef>
		 <nsis script="../SafiServerInstaller/SafiServerInstall2.nsi"/>
-->
	</target>

	<target name="linuxDeploy">
		<delete file="../SafiServerInstaller/safiServerLinux32.zip" quiet="true" />

		<delete dir="D:/safi_install/serverLinux32" includeemptydirs="false" quiet="false" />

		<copy todir="D:/safi_install/serverLinux32/SafiServer" includeemptydirs="true" overwrite="true">
			<fileset dir="../SafiServerCore/" defaultexcludes="true">
				<include name="default_drivers/**" />
				<include name="lib/**" />
				<include name="logs/**" />
				<include name="deploy/actionpaks/**" />
				<include name="resources/**" />
				<include name="deploy/lib/**" />
				<include name="deploy/linux32/**" />
				<include name="deploy/libs.conf" />
				<exclude name="deploy/linux32/jre.zip" />
				<exclude name="**/*.bak" />
				<exclude name="**/*.log" />
				<exclude name="**/*.log.*" />
				<exclude name="**/*.keepme" />
			</fileset>
		</copy>
		<mkdir dir="D:/safi_install/serverLinux32/SafiServer/deploy/actionpaks" />
		<mkdir dir="D:/safi_install/serverLinux32/SafiServer/imports/received" />

		<move file="D:/safi_install/serverLinux32/SafiServer/deploy/linux32/installserver.sh" todir="D:/safi_install/serverLinux32/SafiServer">
		</move>
		<tar compression="gzip" basedir="D:\safi_install\serverLinux32" destfile="../SafiServerInstaller/safiServerLinux32.tar.gz" />

	</target>

</project>

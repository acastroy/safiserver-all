<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
</head>
<body>
<big><big><big><span style="font-weight: bold;">Variables<br>
<br>
</span></big></big></big>
First thing we have to do. Let's create Saflet.<br>
<img style="width: 764px; height: 534px;" alt=""
 src="images/help/saflet101/101-1.JPG"><br>
<br>
We will choose custom Initiator template. So we can invoke saflet
without actual call.<br>
<br>
<img style="width: 756px; height: 656px;" alt=""
 src="images/help/saflet101/101-2.JPG"><br>
<br>
<br>
<big><span style="font-weight: bold;">Current Variable</span></big><br>
<br>
&nbsp;Variable can be created through variables view. There are
three
types of variable. They are runtime, current and global.<br>
runtime variables are variables internal to telephony system.
&nbsp;In
saflet, you will mostly deal with current and global variables. Let's
create current variable.<br>
Current variable exists in saflet execution time. It will be
initialized with value you assigned as a initial value. Current
variable is accessible to all the actionstep within composing saflet.
Let's create saflet variable. In dialog you will be able to assign
variable name, type and initial value.<br>
<br>
<img style="width: 846px; height: 626px;" alt=""
 src="images/help/saflet101/101-3.JPG"><br>
<br>
<img style="width: 828px; height: 597px;" alt=""
 src="images/help/saflet101/101-4.JPG"><br>
<br>
Created variables should appear in variables view.<br>
<br>
<img style="width: 418px; height: 228px;" alt=""
 src="images/help/saflet101/101-5.JPG"><br>
<big><br style="font-weight: bold;">
<span style="font-weight: bold;">Global
Variable</span></big><br>
<br>
Now, let's create global variable. In order to create global variable,
you need to login into Safiserver. Global variables exist in Safiserver.<br>
Within logged in Safiserver, global variables are accessible to all
the saflet and action steps.<br>
&nbsp;<br>
<img style="width: 328px; height: 250px;" alt=""
 src="images/help/saflet101/101-6.JPG"><br>
<br>
Once user logged in Safiserver, user should be able to create global
variable. <br>
<br>
<img style="width: 514px; height: 222px;" alt=""
 src="images/help/saflet101/101-7.JPG"><br>
<br>
<img style="width: 404px; height: 301px;" alt=""
 src="images/help/saflet101/101-8.JPG"><br>
<br>
<br>
global variable also should show up in variables view (if user logged
in server)<br>
<br>
<img style="width: 514px; height: 226px;" alt=""
 src="images/help/saflet101/101-9.JPG"><br>
<br>
<big><span style="font-weight: bold;">Variable Assignment
Actionstep.<br>
</span></big><br>
It is time to assign some value into variable. From actionstep palette,
select assignment actionstep and place into saflet. <br>
<img style="width: 445px; height: 204px;" alt=""
 src="images/help/saflet101/101-10.JPG"><br>
double clicking actionstep should bring up Assignment actionstep
dialog. Each action step should associated actionstep dialog.<br>
User should be able to edit property of each action step through
actionstep dialog.<br>
<br>
<img style="width: 417px; height: 500px;" alt=""
 src="images/help/saflet101/101-11.JPG"><br>
<br>
Click left side of Variable. Select a variable we want to modify.
&nbsp; <br>
<br>
<img style="width: 546px; height: 523px;" alt=""
 src="images/help/saflet101/101-12.JPG"><br>
<br>
After selecting variable, select value you want to assign to variable.
User can select variable. then &nbsp;value of that variable will be
assigned.<br>
Also user can use script and assign value with script. here we select
global variable value to be assigned to current variable.<br>
<br>
<img style="width: 546px; height: 518px;" alt=""
 src="images/help/saflet101/101-13.JPG"><br>
<br>
After selecting global variable, you should see variable assignment in
assignment dialog.<br>
<br>
<img style="width: 418px; height: 502px;" alt=""
 src="images/help/saflet101/101-14.JPG"><br>
<br>
For debugging purpose, let's add some Debuglog actionsteps in saflet.<br>
<img style="width: 651px; height: 336px;" alt=""
 src="images/help/saflet101/101-15.JPG"><br>
<br>
By dragging arrow, you should be able to change the execution flow of
saflet.<br>
<br>
<img style="width: 603px; height: 290px;" alt=""
 src="images/help/saflet101/101-16.JPG"><br>
double clicking Debuglog actionstep will bring up actionstep dialog.
&nbsp;The variable we are interested in is varA and select varA
from message field.<br>
<br>
<img style="width: 545px; height: 522px;" alt=""
 src="images/help/saflet101/101-17.JPG"><br>
<br>
<img style="width: 422px; height: 505px;" alt=""
 src="images/help/saflet101/101-18.JPG"><br>
<br>
make second Debuglog actionstep keep track of variable and change
actionstep flow of saflet.<br>
<br>
<img style="width: 594px; height: 294px;" alt=""
 src="images/help/saflet101/101-19.JPG"><br>
<br>
It is time to test saflet we built. select debug current saflet (User
should be connected with Safiserver)<br>
<br>
<img style="width: 212px; height: 129px;" alt=""
 src="images/help/saflet101/101-20.JPG"><br>
<br>
You will be prompted to publish modified saflet into Safiserver.<br>
<br>
<img style="width: 500px; height: 371px;" alt=""
 src="images/help/saflet101/101-22.JPG"><br>
<br>
Once debugging mode starts, it will launch debug saflet. Debugging
saflet has pink background.<br>
<br>
<img style="width: 765px; height: 364px;" alt=""
 src="images/help/saflet101/101-23.JPG"><br>
<br>
Now it is time to invoke saflet. Bring up Custom Initiator Launcher.<br>
<br>
<img style="width: 207px; height: 130px;" alt=""
 src="images/help/saflet101/101-24.JPG"><br>
<br>
In custom initiator client dialog, specify saflet you want to invoke
and click send button. <br>
This will invoke custom initiator event in Safiserver and will invoke
saflet you specified.<br>
<br>
<img style="width: 372px; height: 341px;" alt=""
 src="images/help/saflet101/101-25.JPG"><br>
<br>
By clicking step debugging button, you should be able to execute each
actionstep step by step.<br>
<br>
<img style="width: 608px; height: 268px;" alt=""
 src="images/help/saflet101/101-26.JPG"><br>
<br>
In execution of DebugLog action step, you should be able to see
returned value of that action step in console view.<br>
Since we are keep track of variable. Returned value is &nbsp;value
of variable.<br>
<br>
<br>
<img style="width: 813px; height: 191px;" alt=""
 src="images/help/saflet101/101-27.JPG"><br>
Also, you should be able to see how variable changes in debugging
variables view. As we can see variable is assigned to new value after
assignment action step execution.<br>
<br>
<img style="width: 461px; height: 205px;" alt=""
 src="images/help/saflet101/101-28.JPG"><br>
<br>
<img style="width: 597px; height: 289px;" alt=""
 src="images/help/saflet101/101-29.JPG"><br>
<br>
We can verify that after executing second debuglog actionstep. you will
see new value is returned in console view.<br>
<br>
<img style="width: 578px; height: 186px;" alt=""
 src="images/help/saflet101/101-30.JPG"><br>
<br>
After completing debug, background of debugging saflet &nbsp;will
turn into gray color.<br>
<br>
<img style="width: 663px; height: 325px;" alt=""
 src="images/help/saflet101/101-31.JPG"><br>
<br>
You can simply close debugging saflet.<br>
<br>
Current variable will be reinitialized whenever saflet executes with
user specified initial value.<br>
However, global variable if it is changed during execution. It will
stay as changed value.<br>
Change assignment step so that we assign value of current variable to
global variable.<br>
<br>
<img style="width: 421px; height: 505px;" alt=""
 src="images/help/saflet101/101-33.JPG"><br>
<br>
Before saflet execution, variable values are <br>
<br>
<img style="width: 456px; height: 210px;" alt=""
 src="images/help/saflet101/101-32.JPG"><br>
<br>
After execution of assignment actionstep, global variable will be
changed permanently and stay changed.<br>
Since global variable is database persisted value, it will stay
eventhough server restarts.<br>
<br>
<img style="width: 590px; height: 274px;" alt=""
 src="images/help/saflet101/101-34.JPG"><br>
<br>
<img style="width: 458px; height: 207px;" alt=""
 src="images/help/saflet101/101-35.JPG"><br>
<br>
another way to assign value to variable is to use javascript.
&nbsp;In assignment actionstep, if you bring up variable chooser
view in value assignment,<br>
you should be able to access script tab. you can write a simple
javascript like below. In javascript, we are generating random value
and returning random value.<br>
<br>
<img style="width: 776px; height: 426px;" alt=""
 src="images/help/saflet101/101-36.JPG"><br>
<br>
<img style="width: 419px; height: 508px;" alt=""
 src="images/help/saflet101/101-37.JPG"><br>
<br>
After execution of saflet, you should be able to see assigned random
value in global variable.<br>
<br>
<img style="width: 460px; height: 223px;" alt=""
 src="images/help/saflet101/101-38.JPG"><br>
<br>
</body>
</html>
